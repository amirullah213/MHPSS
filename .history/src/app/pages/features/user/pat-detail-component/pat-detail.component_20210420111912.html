<div class="container-fluid container-wrapper">
    <div class="row">
        <div class="content-wrapper">
            <div class="page-title">
                <div class="row px-3 px-md-0">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pl-0">
                        <ol class="breadcrumb pt-0 pr-0 my-2 float-left ">
                            <!-- <li class="breadcrumb-item" [routerLink]="['/user']"><a href="javascript:void(0)" class="gray-color">User</a></li> -->
                            <li class="breadcrumb-item active gray-04-color">{{patInfo.departmentName}}</li>
                        </ol>
                    </div>
                </div>
            </div>
            <!-- body -->
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-30">
                    <div class="card card-statistics h-100">
                        <div class="card-body">
                            <div class="row mx-0 border4">
                                <div class="page-title text-capitalize col-lg-4 col-md-4 col-sm-4 col-xs-4"><b>Patient Name :</b> {{patInfo.firstname}} </div>
                                <div class="page-title text-capitalize col-lg-4 col-md-4 col-sm-4 col-xs-4"><b>F / H Name :</b> {{patInfo.f_hName}} </div>
                                <div class="page-title text-capitalize col-lg-2 col-md-2 col-sm-2 col-xs-2"><b>MR# : </b>{{patInfo.patientID}} </div>
                                <div class="page-title text-capitalize col-lg-2 col-md-2 col-sm-2 col-xs-2"><b>CRP No : </b>{{patInfo.token}} </div>
                            </div>
                            <hr class="gray">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item" (click)="setTab('biofh')">
                                    <a class="nav-link" [ngClass]="{'active show': tab === 'biofh'}" id="tab1" data-toggle="tab" href="javascript:void(0)" role="tab" aria-controls="home" aria-selected="true">Bio And Past History</a>
                                </li>
                                <li class="nav-item" (click)="setTab('clinicalInfo')">
                                    <a class="nav-link" [ngClass]="{'active show': tab === 'clinicalInfo'}" id="tab2" data-toggle="tab" href="javascript:void(0)" role="tab" aria-controls="profile" aria-selected="false">Clinical Information</a>
                                </li>
                                <li class="nav-item" (click)="setTab('investigation')">
                                    <a class="nav-link" [ngClass]="{'active show': tab === 'investigation'}" id="tab3" href="javascript:void(0)" data-toggle="tab" role="tab" aria-controls="portfolio" aria-selected="false">Investigation</a>
                                </li>
                                <li class="nav-item" (click)="setTab('treatment')">
                                    <a class="nav-link" [ngClass]="{'active show': tab === 'treatment'}" id="tab4" href="javascript:void(0)" data-toggle="tab" role="tab" aria-controls="portfolio" aria-selected="false">Treatment</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div *ngIf="tab === 'biofh'" class="tab-pane fade" [ngClass]="{'active show': tab === 'biofh'}" id="tab1" role="tabpanel" aria-labelledby="tab1">
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <!-- <div class="form-group float-right">
                                                <button type="button" class="btn mt-1 themeauth-bg text-white btn-lg font-weight-medium auth-form-btn">
                                                    <i class="fa fa-plus-square mr-2"></i> Add New
                                                </button>
                                            </div> -->
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput"><strong>MR #</strong></label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput">{{patInfo.patientID}}</label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput"><strong>Token</strong></label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput">{{patInfo.token}}</label>
                                            </div>
                                        </div>

                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput"><strong>NIC</strong></label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput">{{patInfo.cnic}}</label>
                                            </div>
                                        </div>

                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput"><strong>Patient Name</strong></label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput">{{patInfo.firstname}}</label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput"><strong>Father Name</strong></label>

                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput">{{patInfo.f_hName}}</label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput"><strong>Age</strong></label>
                                                <!-- <input type="password" class="form-control" formControlName="password" id="formGroupExampleInput" placeholder="Enter Password">
                                                <div class="w-100" *ngIf="f.controls.password.status=='INVALID'">
                                                    <div *ngIf="f.controls.password.errors.required && f.controls.password.touched" class="invalid-feedback" [style.display]="f.controls.password.status=='INVALID' ? 'block' : 'none'">Please provide password.</div>
                                                    <div *ngIf="f.controls.password.errors.minlength && f.controls.password.touched" class="invalid-feedback" [style.display]="f.controls.password.status=='INVALID' ? 'block' : 'none'">Password must be at least 1 character.</div>
                                                    <div *ngIf="!f.controls.password.errors.minlength && f.controls.password.errors.pattern && f.controls.password.touched" class="invalid-feedback" [style.display]="f.controls.password.status=='INVALID' ? 'block' : 'none'">Invalid password must contain one capital, one small letter, one digit, one special character.</div>
                                                </div> -->
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput"><span *ngIf="patInfo.ageYear!=0">{{patInfo.ageYear}} Years </span> <span  *ngIf="patInfo.ageMonth!=0">{{patInfo.ageYear}} Months</span> </label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="input-group form-group">
                                                <label for="inputState"><strong>Mobile Number</strong></label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput">{{patInfo.cellNo}}</label>
                                            </div>
                                        </div>
                                        <hr class="hr-gray">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <h5>Past History</h5>
                                        </div>
                                        <hr class="hr-gray">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="table-responsive">
                                                <table class="table center-aligned-table">
                                                    <thead>
                                                        <tr class="text-dark">
                                                            <th>Date Created</th>
                                                            <th>MR#</th>
                                                            <th>Token</th>
                                                            <th class="float-right">View Prescription Slip</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody *ngIf="!userLoader">
                                                        <tr *ngFor="let user of userList">
                                                            <td>{{user.DateCreated | date:"y/dd/MM"}}</td>
                                                            <td>{{user.patientID}}</td>
                                                            <td>{{user.token }}</td>
                                                            <td>

                                                                <a class="text-primary float-right" (click)="gotoPresDetails(user)" href="javascript:void(0)">View Prescription Slip</a>
                                                                <!-- <div class="form-group">
                                                                    <button type="button" (click)="gotoPresDetails()" class="button float-right">View Prescription
                                                                        Slip</button>
                                                                </div> -->
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div *ngIf="userLoader" class="d-flex justify-content-center">
                                                <div class="spinner-border theme-color" role="status">
                                                    <span class="sr-only"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <form [formGroup]="clinicalInformation" novalidate>
                                    <div *ngIf="tab === 'clinicalInfo'" class="tab-pane fade" [ngClass]="{'active show': tab === 'clinicalInfo'}" id="tab2" role="tabpanel" aria-labelledby="tab2">
                                        <div class="row mx-0 border4">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5 class="card-title mb-0">Vitals</h5>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">Blood Presure</label>
                                                    <input type="text" formControlName="bps" class="form-control" placeholder="Blood Pressure">
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">Pulse (Rate Per Minute)</label>
                                                    <input type="text" formControlName="pulse" class="form-control" placeholder="Pulse">
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">Weight (Kg)</label>
                                                    <input type="text" formControlName="weight" class="form-control" placeholder="Weight">
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">Height (cm)</label>
                                                    <input type="text" formControlName="height" class="form-control" placeholder="Height">
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">Temprature (F)</label>
                                                    <input type="text" formControlName="temperature" class="form-control" placeholder="Temprature">
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">Oxygen Saturation</label>
                                                    <input type="text" formControlName="oxygen_saturation" class="form-control" placeholder="Oxygen Saturation">
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="hr-gray mx-0">
                                        <div class="row mx-0 border4" *ngIf='detail.isSync!=9'>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">Is Follow Up</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isFollowUp"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">Malnutrition</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isMalnutration"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up" >
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" *ngIf="clinicalInformation.value.isMalnutration==1">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">Low Weight for Age</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isLowWeight"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" *ngIf="clinicalInformation.value.isMalnutration==1">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">MAUC < 12.5 cm</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isMUAC"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" *ngIf="clinicalInformation.value.isMalnutration==1">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">Short Height for Age</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isShortHeight"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mx-0 border4" *ngIf='detail.isSync==9'>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">ANC/PNC Services</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="ANCServices"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <!-- <option>Choose ANC/PNC</option> -->
                                                            <option>ANC1</option>
                                                            <option>ANC2</option>
                                                            <option>ANC3</option>
                                                            <option>ANC4 or More</option>
                                                            <option >PNC1</option>
                                                            <option>PNC2</option>
                                                            <option >PNC3</option>
                                                            <option >PNC4 or More</option>
                                                          
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">Pregnancy Status</label>
                                                    <span class="wrapper-select">
                                                        <textarea formControlName="pregnancyStatus" cols="80" placeholder="Pregnancy Status"></textarea>
                                                    </span>
                                                </div>
                                            </div>
                                            <!-- <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">Pnc Services</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="PNCServices"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Anc Services">
                                                            
                                                            <option >PNC1</option>
                                                            <option>PNC2</option>
                                                            <option >PNC3</option>
                                                            <option >PNC4 or More</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div> -->
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <h6>Nutration Status (if MAUC
                                                    < 21 cm)</h6>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">During Pregnancy</label>
                                                    <input formControlName="durPrg" class="form-control">
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">During Lactation</label>
                                                    <input formControlName="durLac" class="form-control">
                                                </div>

                                            </div>
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">TT Vaccination Adivce</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isTTVac"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">Is Follow Up</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isFollowUp"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">Malnutrition</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isMalnutration"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" *ngIf="clinicalInformation.value.isMalnutration==1">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">Low Weight for Age</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isLowWeight"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" *ngIf="clinicalInformation.value.isMalnutration==1">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">MAUC < 12.5 cm</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isMUAC"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" *ngIf="clinicalInformation.value.isMalnutration==1">
                                                <div class="form-group input-group">
                                                    <label for="formGroupExampleInput">Short Height for Age</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="isShortHeight"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <option [value]="0">No</option>
                                                            <option [value]="1">Yes</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="hr-gray mx-0">
                                        <div class="row mx-0 border4">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5 class="card-title mb-0">Presenting Complaints</h5>
                                            </div>
                                            <!-- <div  formArrayName="items"
                                                *ngFor="let item of clinicalInformation.get('items').controls; let i = index;">
                                                <div class="row mx-0" [formGroupName]="i"> -->
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">Name</label>
                                                    <input formControlName="name" placeholder="Name" [typeahead]="symptomsData" typeaheadOptionField="name" [typeaheadScrollable]="true" (typeaheadOnSelect)="onSelectSymptom($event)" class="form-control" [typeaheadOptionsLimit]='1000' [typeaheadMinLength]="0">
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">Duration</label>
                                                    <input type="text" formControlName="duration" class="form-control" id="duration" placeholder="Duration">
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">Duration Type</label>
                                                    <select class="form-control" aria-placeholder="Duration Type" formControlName="durationType" aria-label="Text input with segmented dropdown button" placeholder="Complaint Duration">
                                                        <option>Hour(s)</option>
                                                        <option>Day(s)</option>
                                                        <option>Week(s)</option>
                                                        <option>Month(s)</option>
                                                        <option>Year(s)</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                <div class="form-group">
                                                    <label for="formGroupExampleInput">Action</label>
                                                    <button type="button" (click)="addSymptom()" class="btn mt-1 themeauth-bg text-white btn-lg font-weight-medium auth-form-btn">
                                                        <i class="fa fa-plus-square mr-2"></i> Add More
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="row mx-0" *ngFor="let symp of localSymptoms let i=index">
                                                    <hr class="hr-gray mx-0">
                                                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                        <p><b>{{symp.name}}</b></p>
                                                    </div>
                                                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                                        <p><b>{{symp.duration}}</b></p>
                                                    </div>
                                                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                                        <p><b>{{symp.durationType}}</b></p>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                        <div class="form-group mt-1">
                                                            <a class="float-right" href="javascript:void(0)" (click)="removeSymptom(i)">
                                                                <i class="fa fa-close fa-lg text-danger"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="hr-gray mx-0">
                                        <!-- </div>
                                            </div> -->
                                        <div class="row mx-0 border4">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5 class="card-title mb-0">History</h5>
                                            </div>
                                            <hr class="hr-gray mx-0">
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <h5>Past History</h5>
                                                <div class="mb-2">
                                                    <label formArrayName="phArray" *ngFor="let order of clinicalInformation.controls.phArray['controls']; let i = index">
                                                        <input type="checkbox" [formControlName]="i" (change)="onSelectPastH(phArray[i],$event.target.checked)">
                                                        {{phArray[i]}}
                                                    </label>
                                                </div>
                                                <input type="text" formControlName="otherPh" class="form-control" *ngIf='showPh'>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <h5>Family History</h5>
                                                <div class="mb-2">
                                                    <label class="form-check-label" formArrayName="fhArray" *ngFor="let order of clinicalInformation.controls.fhArray['controls']; let j = index">
                                                        <input type="checkbox" [formControlName]="j" (change)="onSelectFamilyh(fhArray[j],$event.target.checked)"
                                                            class="form-check-input" >
                                                        {{fhArray[j]}}
                                                    </label>
                                                    <input type="text" formControlName="otherFh" class="form-control" *ngIf='showFh'>

                                                </div>

                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <h5>Disabilities</h5>
                                                <div class="mb-2">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" formControlName="chkDisabilities" (change)="onSelectDisabilities
                                                        ($event.target.checked)" class="form-check-input">
                                                        isDisable
                                                    </label>
                                                    <span *ngIf='showds'>
                                                    <h5>Disability Description</h5>
                                                    <input type="text" formControlName="txtDisabilities" class="form-control" >
                                                    </span>
                                                </div>

                                            </div>
                                        </div>
                                        <hr class="hr-gray mx-0">
                                        <div class="row mx-0 border4">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5 class="card-title mb-0">Signs</h5>
                                            </div>
                                            <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                                                <div class="form-group">
                                                    <input formControlName="selectedValueSign" placeholder="Signs" [typeahead]="signsData" typeaheadOptionField="name" [typeaheadScrollable]="true" (typeaheadOnSelect)="onSelectSign($event)" class="form-control" [typeaheadOptionsLimit]='1000' [typeaheadMinLength]="0">
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                <div class="form-group mt-1">
                                                    <button type="button" (click)="addSign($event.item)" class="btn themeauth-bg text-white btn-lg font-weight-medium auth-form-btn"> <i class="fa fa-plus-square mr-2"></i> Add</button>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5>Selected signs</h5>
                                                <div class="row mx-0" *ngFor="let sig of localSign let i=index">
                                                    <hr class="hr-gray mx-0">
                                                    <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                                                        <p><b>{{sig.name}}</b></p>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                        <div class="form-group mt-1">
                                                            <a class="float-right" href="javascript:void(0)" (click)="removeSign(i)">
                                                                <i class="fa fa-close fa-lg text-danger"></i>
                                                            </a>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <hr class="hr-gray mx-0">
                                        <div class="row mx-0 border4">
                                            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                                <h5 class="card-title mb-0">Diagnosis</h5>
                                            </div>
                                            <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                                                <h5 class="card-title mb-0">Description</h5>
                                            </div>
                                            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                                <input formControlName="pname" placeholder="Diagnosis" [typeahead]="diagnosisData" typeaheadOptionField="name" [typeaheadScrollable]="true" (typeaheadOnSelect)="onSelectDiag($event)" class="form-control" [typeaheadOptionsLimit]='1000' [typeaheadMinLength]="0">
                                                <!-- <select formControlName="pname" class="form-control"
                                                (change)="changeRefVal($event)">
                                                    <option>Choose Diagnosis</option>
                                                    <option *ngFor="let dg of diagnosisData">
                                                        {{dg.name}}
                                                        </option>
                                                </select> -->
                                            </div>
                                            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5" >
                                                <input formControlName="description" (ngModelChange)="enableDesc()" placeholder="Description" class="form-control">
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 mt-1">
                                                <button type="button"  (click)="addDiag()" [disabled]='descriptionAD' class="btn themeauth-bg text-white btn-lg font-weight-medium auth-form-btn"><i class="fa fa-plus-square mr-2"></i>Add More</button>
                                            </div>
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="row mx-0" *ngFor="let trt of localDiagData let i=index">
                                                    <hr class="hr-gray mx-0">
                                                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                                        <p><b>{{trt.name}}</b></p>
                                                    </div>
                                                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                                        <p><b>{{trt.description}}</b></p>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                        <div class="form-group">
                                                            <a class="float-right" href="javascript:void(0)" (click)="removeDiag(i)">
                                                                <i class="fa fa-close fa-lg text-danger"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="hr-gray mx-0">
                                        <div class="row mx-0 border4" *ngIf="detail.isSync==9">
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <label for="formGroupExampleInput">LMP</label>
                                                <input type="text" formControlName="LMP" (bsValueChange)="eddCalc(clinicalInformation.value.LMP)" placeholder="During Pregnancy" class="form-control" [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }" bsDatepicker>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <label for="formGroupExampleInput">EDD</label>
                                                <input formControlName="EDD" [attr.readonly]="true" class="form-control">
                                            </div>
                                        </div>
                                        <hr class="hr-gray mx-0">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center mt-3">
                                            <button type="button" (click)="addClinicalInfo()" *ngIf="!userLoader"  class="button">
                                              <i class="fa fa-check-square mr-2"></i> Save 
                                            </button>
                                            <button type="button" *ngIf="userLoader" class="button">
                                                <span class="spinner-border" *ngIf="userLoader" role="status" aria-hidden="true"></span>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                <form [formGroup]="investigationForm" novalidate>
                                    <div *ngIf="tab === 'investigation'" class="tab-pane fade" [ngClass]="{'active show': tab === 'investigation'}" id="tab3" role="tabpanel" aria-labelledby="tab3">
                                        <div class="row mx-0 border4">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="custom-control-inline mr-md-5 mb-2">
                                                    <label class="form-check-label">Pathalogy</label>
                                                </div>
                                                <div class="form-group">
                                                    <input formControlName="selectedValuePath" placeholder="Pathalogy" [typeahead]="pathData" typeaheadOptionField="testName" [typeaheadScrollable]="true" (typeaheadOnSelect)="onSelectPath($event)" class="form-control" [typeaheadOptionsLimit]='1000' [typeaheadMinLength]="0">
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <div class="custom-control-inline mr-md-5 mb-2">
                                                    <label class="form-check-label">Radiology</label>
                                                </div>
                                                <div class="form-group input-group">
                                                    <input formControlName="selectedValueRad" placeholder="Radiology" [typeahead]="radData" typeaheadOptionField="name" [typeaheadScrollable]="true" (typeaheadOnSelect)="onSelectRad($event)" class="form-control" [typeaheadOptionsLimit]='1000' [typeaheadMinLength]="0">
                                                </div>
                                            </div>
                                            <div class="col-md-8">
                                                <div class="custom-control-inline mr-md-5 mb-2">
                                                    <label class="form-check-label">Radiology Test Name</label>
                                                </div>
                                                <div class="form-group">
                                                    <input formControlName="selectedValueRadName" placeholder="Radiology Test Name" [typeahead]="radNameData" typeaheadOptionField="testName" [typeaheadScrollable]="true" (typeaheadOnSelect)="onSelectRadName($event)" class="form-control" [typeaheadOptionsLimit]='1000'
                                                        [typeaheadMinLength]="0">
                                                </div>
                                            </div>
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5>Selected Investigation</h5>
                                                <hr class="hr-gray">
                                                <div class="table-responsive">
                                                    <table class="table center-aligned-table">
                                                        <thead>
                                                            <tr class="text-dark text-center">
                                                                <th>Type</th>
                                                                <th>Investigation Type</th>
                                                                <th>Test Status</th>
                                                                <th>Test Date</th>
                                                                <th class="text-center">Report /Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr class="text-center" *ngFor="let pth of localPath let i=index">
                                                                <td>
                                                                    <span *ngIf="pth.testType==1">Pathalogy</span>
                                                                    <span *ngIf="pth.testType!=1">Radiology</span>
                                                                </td>
                                                                <td>{{pth.testName}}</td>
                                                                <td>
                                                                    <span *ngIf="pth.status==1 && pth.id" class="text-success">Performed</span>
                                                                    <span *ngIf="pth.status==0 && pth.id" class="text-warning">Pending</span>
                                                                    <!-- <span  class="text-info" *ngIf="!pth.id">Not Send yet</span> -->
                                                                </td>
                                                                <td><span *ngIf="pth.DateCreated">{{pth.DateCreated | date: 'dd-MM-y h:mm a'}}</span>
                                                                </td>
                                                                <td>
                                                                    <a href="javascript:void(0)" class="text-info mr-1" (click)="viewReport(template,pth,i)">View Report</a> /
                                                                    <a href="javascript:void(0)" class="text-center" (click)="removeTest(i,pth)">
                                                                        <i class="fa fa-close fa-lg text-danger"></i>
                                                                    </a>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="form-group text-center">
                                                    <button type="button" (click)="addinvestigation()" *ngIf="!userLoader" class="btn themeauth-bg text-white btn-lg font-weight-medium auth-form-btn"><i
                                                        class="fa fa-send-o"></i> Send To Lab / Radiology </button>
                                                    <button type="button" *ngIf="userLoader" class="btn themeauth-bg text-white btn-lg font-weight-medium auth-form-btn">                                               
                                                        <span class="spinner-border" *ngIf="userLoader" role="status" aria-hidden="true"></span>
                                                    </button>
                                                </div>
                                                <ng-template #template>
                                                    <div class="modal-header ">
                                                        <h4 class="modal-title pull-left">Result Report</h4>
                                                        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                    </div>
                                                    <div class="modal-body ">
                                                        <h5>Test Type : <span *ngIf="sData.testType==1">Pathalogy</span><span *ngIf="sData.testType!=1">Radiology</span>
                                                            <span class="ml-5">{{sData.testName}}</span>
                                                        </h5>
                                                        <!-- <div class="row mx-0">
                                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                                <p class="mb-1 mt-2"><b>MR#</b>
                                                                    <span class="ml-4">{{patInfo.patientID}}</span>
                                                                </p>
                                                            </div>
                                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                                <p class="mb-1 mt-2"><b>Token Number</b>
                                                                    <span class="ml-4">{{patInfo.token}}</span>
                                                                </p>
                                                            </div>
                                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                                <p class="mb-1 mt-2"><b>Patient Name</b>
                                                                    <span class="ml-4">{{patInfo.firstname}}</span>
                                                                </p>
                                                                
                                                                <p class="mb-1 mt-3"><b>Date Of Birth</b>
                                                                    <span class="ml-4">{{patInfo.dob | date}}</span>
                                                                </p>
                                                            </div>
                                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                                <p class="mb-1 mt-3"><b>Father/Husband Name</b>
                                                                    <span class="ml-4"> {{patInfo.f_hName}}</span>
                                                                </p>
                                                                
                                                                <p class="mb-1 mt-3"><b>Mobile Number</b>
                                                                    <span class="ml-4"> {{patInfo.cellNo}}</span>
                                                                </p>
                                                               
                                                            </div>
                                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                                <p class="mb-1 mt-3" *ngIf="sData.testName!='' && sData.isSupper==1"><b>Test</b>
                                                                    <span class="ml-4"> {{sData.testName}}</span>
                                                                </p>
                                                            </div>
                                                            
                                                        </div> -->
                                                        <div class="row mx-0">
                                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                                <p class="mb-1 mt-2"><b>MR#</b>
                                                                    <span class="ml-4">{{patInfo.patientID}}</span>
                                                                </p>
                                                                <p class="mb-1 mt-2"><b> Name</b>
                                                                    <span class="ml-4">{{patInfo.firstname}}</span>
                                                                </p>
                                                                <p class="mb-1 mt-2"><b>Sent From</b>
                                                                    <span class="ml-4">{{patInfo.departmentName}}</span>
                                                                </p>
                                                                <p class="mb-1 mt-2"><b>CNIC</b>
                                                                    <span class="ml-4">{{patInfo.cnic}}</span>
                                                                </p>
                                                                <p class="mb-1 mt-2"><b>Test Date / Time</b>
                                                                    <span class="ml-4">{{sData.DateCreated | date: 'dd-MM-yyyy h:mm a'}}</span>
                                                                </p>
                                                                <span *ngIf="patInfo.bedNo!=null">
                                                                    <p class="mb-1 mt-2"><b>Bed No</b>
                                                                        <span class="ml-4"> {{patInfo.bedNo}}</span>
                                                                </p>
                                                                </span>
                                                            </div>
                                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                                <p class="mb-1 mt-2"><b>Token#</b>
                                                                    <span class="ml-4">{{patInfo.token}}</span>
                                                                </p>
                                                                <p class="mb-1 mt-2"><b>F/H Name</b>
                                                                    <span class="ml-4"> {{patInfo.f_hName}}</span>
                                                                </p>
                                                                <p class="mb-1 mt-2"><b>Age</b>
                                                                    <span class="ml-4" *ngIf="patInfo.ageYear!=0">{{patInfo.ageYear}} year(s)</span>
                                                                    <span class="ml-4" *ngIf="patInfo.ageMonth!=0">{{patInfo.ageMonth}} month(s)</span>
                                                                </p>
                                                                <p class="mb-1 mt-2"><b>Mobile#</b>
                                                                    <span class="ml-4"> {{patInfo.cellNo}}</span>
                                                                </p>
                                                                <span *ngIf="patInfo.status!=0">
                                                                    <p class="mb-1 mt-2"><b>Result Date /Time</b>
                                                                        <span class="ml-4">{{sData.DateModified | date: 'dd-MM-yyyy h:mm a'}}</span>
                                                                </p>
                                                                </span>
                                                                <span *ngIf="sData.status==0">
                                                                    <p class="mb-1 mt-2"><b>Result Date /Time</b>
                                                                        <span class="ml-4">Result Pending</span>
                                                                </p>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="table-responsive">
                                                            <table class="table center-aligned-table" *ngIf="sData.testType==1">
                                                                <thead>
                                                                    <tr class="text-dark">
                                                                        <th>Test Name</th>
                                                                        <th>Result</th>
                                                                        <th>Range</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr *ngFor="let ts of subTests let i=index">
                                                                        <td>{{ts.oldTestName}}</td>
                                                                        <td>{{ts.result}}</td>
                                                                        <td>{{ts.refRange}}</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <hr class="gray">
                                                            <div class="table center-aligned-table" *ngIf="sData.testType!=1">
                                                                <div class="form-group row mx-0">
                                                                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 mt-3"><label for="inputState">Test Name</label></div>
                                                                    <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                                                                        <p class="mb-2 mt-3"><b>{{testNameF}}</b>

                                                                        </p>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row mx-0">
                                                                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 mt-2"><label for="inputState">Report</label></div>
                                                                    <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10" [innerHTML]="xRayFilms"></div>
                                                                </div>
                                                                <div class="form-group row mx-0">
                                                                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 mt-3"><label for="inputState">Diagnosis</label></div>
                                                                    <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                                                                        <p class="mt-3">{{resultF}}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row mx-0" *ngIf="imagesArr.length>0">
                                                                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 mt-3"><label for="inputState">Test Scans</label></div>
                                                                    <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                                                                        <span *ngFor="let img of imagesArr; let i=index" class="ml-2">
                                                                            <a href="javascript:void(0)" (click)="showImageModal(template1,imageUrl+img.image)">
                                                                                <img [src]="imageUrl+img.image"  height="60" class="hover rounded">
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="button" (click)="gotoPrintPage()"><i class="fa fa-check-square"></i> Print</button>
                                                        <button type="button" class="button" (click)="modalRef.hide()"><i class="fa fa-check-square"></i> Ok</button>
                                                    </div>
                                                </ng-template>
                                                <ng-template #template1>
                                                    <div class="modal-header">
                                                        <h4 class="modal-title pull-left">Image </h4>
                                                        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef1.hide()">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="row mx-0">
                                                            <img [src]="imageInModal" class="mx-auto d-block w-100 h-100">
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="button-danger" (click)="modalRef1.hide()"><i class="fa fa-check-square"></i> Close</button>
                                                    </div>
                                                </ng-template>
                                            </div>
                                        </div>
                                        <hr class="hr-gray mx-0">
                                        <div class="row mx-0 border4">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5>Diagnosis For Admission / OT</h5>
                                            </div>
                                            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                                <div class="form-group">
                                                    <label>Diagnosis</label>
                                                    <input formControlName="selectedValueIndoorDiag" placeholder="Diagnosis" [value]="selectedValueIndoorDiag" [typeahead]="IndoorDiagData" typeaheadOptionField="name" [typeaheadScrollable]="true" (typeaheadOnSelect)="onSelectIndoorDiag($event)" class="form-control"
                                                        [typeaheadOptionsLimit]='1000' [typeaheadMinLength]="0">
                                                </div>
                                            </div>
                                            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                                <label>Description</label>
                                                <input formControlName="descriptionIndoor" placeholder="Description" class="form-control">
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 mt-1">
                                                <label>Action</label>
                                                <button type="button" (click)="addIndoorDiag()" class="btn themeauth-bg text-white btn-lg font-weight-medium auth-form-btn"><i class="fa fa-plus-square mr-2"></i>Add More</button>
                                            </div>
                                            <hr class="hr-gray">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5>Selected Diagnosis</h5>
                                                <div class="row mx-0" *ngFor="let indD of localIndoorData let i=index">
                                                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                                        <p><b>{{indD.name}}</b></p>
                                                    </div>
                                                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                                        <p><b>{{indD.description}}</b></p>
                                                    </div>
                                                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                        <div class="form-group mt-1">
                                                            <a href="javascript:void(0)" (click)="removeIndoorDiag(i)">
                                                                <i class="fa fa-close fa-lg text-danger"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <hr class="hr-gray">
                                            <!-- <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="form-group text-center">
                                                    <button type="button" class="btn btn-block themeauth-bg text-white btn-lg font-weight-medium auth-form-btn"><i class="fa fa-plus"></i> Add More </button>
                                                </div>
                                            </div> -->
                                            <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                                                <div class="form-group input-group">
                                                    <label>Select Referral</label>
                                                    <span class="wrapper-select">
                                                        <select formControlName="ref" class="form-control"
                                                            (change)="changeRefVal($event.target.value)">
                                                            <option>Choose Referral</option>
                                                            <option *ngFor="let rl of refList" [value]="rl.id">{{rl.fname}} {{rl.lname}}</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                <div class="form-group text-center">
                                                    <label for="formGroupExampleInput">Action</label>
                                                    <button type="button" (click)="generatetoken(0)" *ngIf="!userLoader" class="button mt-1">
                                                        <i class="fa fa-plus mr-1"></i>Admit  
                                                    </button>
                                                    <button type="button" *ngIf="userLoader" class="button mt-1">
                                                        <span class="spinner-border" *ngIf="userLoader" role="status" aria-hidden="true"></span>
                                                    </button>
                                                </div>
                                            </div>
                                            <hr class="hr-gray">
                                            <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                                                <div class="input-group form-group">
                                                    <label for="formGroupExampleInput">Opreation Date</label>
                                                    <input type="text" formControlName="termination_date" [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }" class="form-control" id="formGroupExampleInput" placement="top" placeholder="Select Date of Operation" bsDatepicker>
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">
                                                            <i class="fa fa-calendar-plus-o"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                <div class="form-group text-center">
                                                    <label for="formGroupExampleInput">Action</label>
                                                    <button type="button" (click)="generatetoken(1)" *ngIf="!userLoader" class="button mt-1">
                                                        <i class="fa fa-wheelchair mr-1"></i> Operate
                                                    </button>
                                                    <button type="button" *ngIf="userLoader" class="button mt-1">
                                                        <span class="spinner-border" *ngIf="userLoader" role="status" aria-hidden="true"></span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <form [formGroup]="treatmentForm" novalidate>
                                    <div *ngIf="tab === 'treatment'" class="tab-pane fade" [ngClass]="{'active show': tab === 'treatment'}" id="tab4" role="tabpanel" aria-labelledby="tab4">
                                        <div class="row mx-0 border4">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5>Treatment</h5>
                                            </div>
                                            <hr class="hr-gray mx-0">
                                            <!-- <div  formArrayName="treatmentItems"
                                            *ngFor="let item of treatmentForm.get('treatmentItems').controls; let i = index;">
                                            <div class="row mx-0" [formGroupName]="i"> -->
                                            <!-- <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                <label>Remove</label>
                                            </div> -->
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group">
                                                    <label>Medicine Name</label>
                                                    <input formControlName="itemName" [typeahead]="treatData" typeaheadOptionField="itemName" [typeaheadScrollable]="true" (typeaheadOnSelect)="onSelectTreat($event)" class="form-control" [typeaheadOptionsLimit]='1000' [typeaheadMinLength]="0">
                                                </div>
                                                <input type="hidden" formControlName="itemID">
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                <div class="form-group">
                                                    <label>Unit</label>
                                                    <input type="text" formControlName="unit" class="form-control" id="formGroupExampleInput" placeholder="500 ml" [attr.readonly]="true">
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                <div class="form-group">
                                                    <label>Type</label>
                                                    <input type="text" formControlName="type" class="form-control" id="formGroupExampleInput" placeholder="Enter Medicine Type" [attr.readonly]="true">
                                                </div>
                                            </div>

                                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                                <div class="form-group input-group">
                                                    <label>Dose</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="dose"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <!-- <option>Select Dose</option> -->
                                                            <option>SOS</option>
                                                            <option>OD</option>
                                                            <option>STAT</option>
                                                            <option>BiD</option>
                                                            <option>TDS</option>
                                                            <option>QiD</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                                <div class="form-group">
                                                    <label>Prescribed Quantity</label>
                                                    <input type="number" formControlName="prescribedQuantity" class="form-control" id="formGroupExampleInput" placeholder="Prescribed Quantity">
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                                <div class="form-group input-group">
                                                    <label>Prandial</label>
                                                    <span class="wrapper-select">
                                                        <select class="form-control" formControlName="prandial"
                                                            aria-label="Text input with segmented dropdown button"
                                                            placeholder="Is Follow Up">
                                                            <!-- <option>Select Prandial</option> -->
                                                            <option>Before Meal</option>
                                                            <option>In Between Meal</option>
                                                            <option>After Meal</option>
                                                            <option>Others</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <div class="form-group">
                                                    <label>Remarks/Dosing</label>
                                                    <textarea formControlName="remarks" cols="19" class="form-control" id="formGroupExampleInput" placeholder="Remarks/Dosing"></textarea>
                                                </div>
                                            </div>
                                            <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 mt-4">
                                                <div class="form-group text-center">
                                                    <button class="btn mt-4 themeauth-bg text-white btn-lg font-weight-medium auth-form-btn" (click)="addTreat()">
                                                        <i class="fa fa-plus-square mr-2"></i>Add More
                                                    </button>
                                                </div>
                                            </div>
                                            <hr class="hr-gray mx-0">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="form-group text-center">
                                                    <table>
                                                        <th width="30%">Medicine Name/Unit Type </th>
                                                        <th width="15%">Dose </th>
                                                        <th width="15%">Quantity</th>
                                                        <th width="15%">Prandial </th>
                                                        <th width="30%">Remarks </th>
                                                        <th width="10%">Action </th>
                                                        <tr *ngFor="let trt of localTreat let i=index">
                                                            <td width="30%">{{trt.medicine}},{{trt.unit}},{{trt.type1}}</td>
                                                            <td width="15%">{{trt.dose}}</td>
                                                            <td width="15%">{{trt.prescribedQuantity}}</td>
                                                            <td width="15%"><span *ngIf="trt.prandial!='undefined'">{{trt.prandial}}</span></td>
                                                            <td width="30%">{{trt.remarks}}</td>
                                                            <td width="10%">
                                                                <div class="form-group">
                                                                    <button type="button" class="button float-right" (click)="removeTreat(i)"> 
                                                                        <i class="fa fa-close"></i>
                                                                    </button>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <br>
                                                    <h4>Or</h4>
                                                    <hr class="hr-gray mx-0">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="form-group">
                                                            <label>Other Medicine</label>
                                                            <textarea class="form-control" formControlName="tComments" name="comments" type=text></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <button type="button" class="btn btn-block themeauth-bg text-white btn-lg font-weight-medium auth-form-btn"> Add More </button>  -->
                                            </div>
                                        </div>
                                        <!-- <hr class="hr-gray mx-0">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="form-group">
                                                    <label>Treatment Comment</label>
                                                    <textarea class="form-control" formControlName="tComments" name="comments" type=text></textarea>
                                                </div>
                                            </div>
                                        </div> -->
                                        <hr class="hr-gray mx-0">
                                        <div class="row mx-0 border4">
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group">
                                                    <label>Follow Up</label>
                                                    <input type="number" formControlName="fol_up" name="fun" class="form-control" id="formGroupExampleInput" placeholder="Follow Up">
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <div class="form-group input-group">
                                                    <label>Intervals</label>
                                                    <span class="wrapper-select">
                                                    <select class="form-control" formControlName="followUpInterval"
                                                        aria-label="Text input with segmented dropdown button"
                                                        placeholder="Is Follow Up">
                                                        <!-- <option>Select Interval</option> -->
                                                        <option>Hour(s)</option>
                                                        <option>Day(s)</option>
                                                        <option>Week(s)</option>
                                                        <option>Month(s)</option>
                                                        <option>Year(s)</option>
                                                    </select>
                                                </span>
                                                </div>
                                            </div>
                                            <hr class="hr-gray mx-0">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="form-group">
                                                    <label>Follow Up Comment</label>
                                                    <textarea class="form-control" formControlName="fComments" name="followupcomments" type=text></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="hr-gray mx-0">
                                        <div class="row mx-0 border4">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-4">
                                                <h5>Referral</h5>
                                                <div class="custom-radio custom-control-inline mr-md-5">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" formControlName="access_type" id="gridRadios21" value="0" [checked]='true' (change)="changeCheckboxVal($event)">
                                                        <label class="form-check-label" for="gridRadios21">No</label>
                                                    </div>
                                                </div>
                                                <div class="custom-radio custom-control-inline mr-md-5">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" formControlName="access_type" id="gridRadios31" value="1" (change)="changeCheckboxVal($event)">
                                                        <label class="form-check-label" for="gridRadios31">Yes</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" *ngIf="showRef">
                                                <div class="row">
                                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group input-group">
                                                            <label>Location</label>
                                                            <select class="form-control" formControlName="FollowUpExtInt" (change)="changFollowUpVal($event)">
                                                                <option [value]="">Select Location</option>
                                                                <option [value]="0">Internal</option>
                                                                <option [value]="1">External</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" *ngIf="show ">
                                                        <div class="form-group input-group">
                                                            <label>Department</label>
                                                            <span class="wrapper-select">
                                                        <select formControlName="Department" class="form-control"
                                                            (change)="changeDepVal($event.target.value)">
                                                            <option>Choose Department</option>
                                                            <option *ngFor="let dep of DepartmentD">{{dep.NAME}}</option>
                                                        </select>
                                                    </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" *ngIf="!show ">
                                                        <div class="row">
                                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                                <div class="form-group input-group">
                                                                    <label>Hospital Name</label>
                                                                    <input type="text" formControlName="Hospital" class="form-control" id="formGroupExampleInput" placeholder="Hospital Name">
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                                <div class="form-group input-group">
                                                                    <label>Ambulance/conveyance</label>
                                                                    <span class="wrapper-select">
                                                                        <select class="form-control" formControlName="Ambulance"
                                                                            aria-label="Text input with segmented dropdown button"
                                                                            placeholder="Is Follow Up">
                                                                            <option [value]="0">Self</option>
                                                                            <option [value]="1">Merf</option>
                                                                        </select>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <div class="form-group">
                                                                    <label>Referral Notes</label>
                                                                    <textarea class="form-control" formControlName="refNotes" name="referralNotes" type=text></textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-2" *ngIf="showRef">
                                                <div class="form-group text-center">
                                                    <button type="button" (click)="reffer()" class="btn themeauth-bg text-white btn-lg font-weight-medium auth-form-btn">
                                                        <i class="fa fa-check-square mr-2"></i>Referred Done
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-4">
                                            <div class="form-group text-center">
                                                <button type="button" (click)="addtreatmentinfo()" class="btn themeauth-bg text-white btn-lg font-weight-medium auth-form-btn">
                                                    <i class="fa fa-send-o mr-2"></i>Send To Pharmacy
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>